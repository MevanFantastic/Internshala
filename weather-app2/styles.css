@keyframes gradientShift {
  0%   { background-position: 0% 50%; }
  50%  { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(10px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes cloudMove {
  from { background-position: 0 0; }
  to   { background-position: -10000px 0; }
}
body.weather-clear {
  background: linear-gradient(-45deg, #FFD54F, #FFB300, #FF8F00, #FF6F00);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
}
body.weather-cloudy {
  background: linear-gradient(-45deg, #ECE9E6, #FFFFFF, #D3CCE3, #E9E4F0);
  background-size: 400% 400%;
  animation: gradientShift 20s ease infinite;
}
body.weather-rain {
  background: linear-gradient(-45deg, #4A90E2, #5073B8, #2C3E50, #4A6073);
  background-size: 400% 400%;
  animation: gradientShift 15s ease infinite;
}
body.weather-thunder {
  background: linear-gradient(-45deg, #1F1C2C, #928DAB, #1F1C2C, #3E3A4E);
  background-size: 400% 400%;
  animation: gradientShift 10s ease infinite;
}
body.weather-snow {
  background: linear-gradient(-45deg, #E0EAFC, #CFDEF3, #E0EAFC, #CFDEF3);
  background-size: 400% 400%;
  animation: gradientShift 20s ease infinite;
}
body.weather-mist {
  background: linear-gradient(-45deg, #BBD2C5, #536976, #BBD2C5, #89AEB2);
  background-size: 400% 400%;
  animation: gradientShift 20s ease infinite;
}
body:not(.weather-clear):not(.weather-cloudy):not(.weather-rain):not(.weather-thunder):not(.weather-snow):not(.weather-mist) {
  background: linear-gradient(to br, #90CAF9, #42A5F5);
}
body {
  transition: background 1s ease;
}
.clouds {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  pointer-events: none;
  background: url('assets/clouds.png') repeat-x;
  opacity: 0.15;
  animation: cloudMove 60s linear infinite;
  z-index: 0;
}
.container, #currentWeather, #forecast {
  position: relative;
  z-index: 10;
}

#currentWeather, #forecast > div {
  animation: fadeInUp 0.5s ease forwards;
}

input#cityInput {
  transition: box-shadow 0.3s ease, transform 0.2s ease;
}
input#cityInput:focus {
  box-shadow: 0 0 8px rgba(96, 165, 250, 0.7);
  transform: scale(1.02);
}
button {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
button:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
button:active {
  transform: scale(0.98);
}
.forecast-card {
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  background-color: rgba(255,255,255,0.8); /* will be overridden in dark-mode */
}
.forecast-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.1);
}

#currentWeather > div {
  background-color: rgba(255,255,255,0.9);
  border-radius: 1rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

h1, h2 {
  text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
}

body.dark-mode {
  --text-primary: #e0e0e0;
  --text-secondary: #aaaaaa;
  --card-bg: rgba(30,30,30,0.7);
}
body.dark-mode {
  color: var(--text-primary);
}
body.dark-mode #currentWeather h2,
body.dark-mode #currentWeather p,
body.dark-mode #forecast p,
body.dark-mode #errorMsg {
  color: var(--text-primary);
}
body.dark-mode .bg-white {
  background-color: var(--card-bg) !important;
}
body.dark-mode input#cityInput,
body.dark-mode select,
body.dark-mode button {
  background-color: rgba(255,255,255,0.1);
  color: var(--text-primary);
  border-color: rgba(255,255,255,0.3);
}
body.dark-mode input#cityInput:focus {
  box-shadow: 0 0 8px rgba(96, 165, 250, 0.7);
}
body.dark-mode #themeToggle {
  background: rgba(0,0,0,0.5);
  color: #fff;
}

#themeToggle {
  position: fixed;
  top: 1rem; right: 1rem;
  background: rgba(255,255,255,0.7);
  padding: 0.5rem;
  border-radius: 9999px;
  cursor: pointer;
  backdrop-filter: blur(5px);
  z-index: 20;
}
@media (max-width: 640px) {
  .container {
    padding-left: 1rem;
    padding-right: 1rem;
  }
}
